# Example configuration for hadlink
# Copy to config.yaml and customize

# HMAC secret for short code generation (32 bytes, base64 encoded)
# Generate with: openssl rand -base64 32
secret: "CHANGE_ME_GENERATE_WITH_OPENSSL_RAND"

# Proof-of-Work difficulty (number of leading zero bits)
# 0 = disabled, recommended range: 12-20
pow_difficulty: 0

# Rate limiting
rate_limit:
  # Maximum requests per IP per window
  per_ip: 10
  # Time window in seconds
  window: 60
  # Maximum requests per /24 subnet
  per_subnet: 50

# Storage backend
storage:
  # Type: sqlite or lmdb
  type: sqlite
  # Path to database file
  path: /var/lib/hadlink/hadlink.db
  # SQLite specific: enable WAL mode
  wal_mode: true

# API keys for authenticated access (bypasses PoW and rate limits)
api_keys:
  - name: ci
    key: "CHANGE_ME_GENERATE_RANDOM_KEY"
  - name: monitoring
    key: "CHANGE_ME_GENERATE_RANDOM_KEY"

# Server configuration
server:
  # Mode: shorten or redirect
  mode: shorten
  # Port to listen on
  port: 8443
  # Bind address (use 127.0.0.1 for local-only)
  bind: "127.0.0.1"

# Logging
logging:
  # Level: debug, info, warn, error
  level: info
  # Format: json or text
  format: json
